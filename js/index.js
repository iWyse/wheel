(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();$("#phone").mask("+7(999) 999-9999");let f="";const l=[{text:"Подвесное кресло",color:"rgba(245, 245, 245, 1)",colorText:"#000"},{text:"Качели",color:"rgba(236, 55, 0, 1)",colorText:"#fff"},{text:"Гриль",color:"rgba(245, 245, 245, 1)",colorText:"#000"},{text:"Тандыр",color:"rgba(236, 55, 0, 1)",colorText:"#fff"},{text:"Световая фигура",color:"rgba(245, 245, 245, 1)",colorText:"#000"},{text:"Костровая чаша",color:"rgba(236, 55, 0, 1)",colorText:"#fff"},{text:"Кухоный остров",color:"rgba(245, 245, 245, 1)",colorText:"#000"},{text:"Уличный шкаф",color:"rgba(236, 55, 0, 1)",colorText:"#fff"}],x=document.querySelector(".spin-wrapper"),a=document.querySelector(".deal-wheel"),s=a.querySelector(".spinner"),p=document.querySelector(".btn-spin"),y=a.querySelector(".ticker"),v=document.querySelector(".info"),_=document.querySelector(".button-wrapper"),z=document.querySelector(".prize-info"),d=document.querySelector(".form__input"),T=document.querySelector(".prize__input"),g=document.querySelector(".btn-luckyWheel");x.style.display="none";g.addEventListener("click",()=>{x.style.display="flex",g.remove()});d.addEventListener("mouseover",()=>{d.placeholder="+7(___) ___-____"});d.addEventListener("mouseout",()=>{d.placeholder="Ваш номер телефона"});let m=360/l.length;const k=Math.floor(180/l.length),S="is-spinning",L="selected",A=window.getComputedStyle(s);let M,i=0,b=0,h;const E=()=>{l.forEach(({text:t,color:r,colorText:c,reaction:n},e)=>{const o=m*e*-1-k+180;s.insertAdjacentHTML("beforeend",`<li class="prize" data-reaction=${n} style="--rotate: ${o}deg">
			<span class="text " style="color: ${c}">${t}</span>
		 </li>`)})},P=()=>{s.setAttribute("style",`background: conic-gradient(
		 from -90deg,
		 ${l.map(({color:t},r)=>`${t} 0 ${100/l.length*(l.length-r)}%`).reverse()}
	  );`)},w=()=>{P(),E(),h=a.querySelectorAll(".prize")},N=(t,r)=>(t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t+1))+t),q=()=>{const t=A.transform.split("(")[1].split(")")[0].split(","),r=t[0],c=t[1];let n=Math.atan2(c,r);n<0&&(n+=2*Math.PI);const e=Math.round(n*(180/Math.PI)),o=Math.floor(e/m);b!==o&&(y.style.animation="none",setTimeout(()=>y.style.animation=null,10),b=o),M=requestAnimationFrame(q)},C=()=>{let t=Math.floor(i/m);h[t].classList.add(L),f=l[t].text,T.value=f,setTimeout(()=>{v.style.display="flex",_.style.display="none",z.textContent+=f+"!"},1e3)};p.addEventListener("click",()=>{p.disabled=!0,i=Math.floor(Math.random()*360+N(2e3,3e3)),h.forEach(t=>t.classList.remove(L)),a.classList.add(S),s.style.setProperty("--rotate",i),y.style.animation="none",q()});s.addEventListener("transitionend",()=>{cancelAnimationFrame(M),i%=360,C(),a.classList.remove(S),s.style.setProperty("--rotate",i),p.disabled=!1});w();
